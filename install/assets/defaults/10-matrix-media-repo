#!/command/with-contenv bash

CONFIG_PATH=${CONFIG_PATH:-"/config/"}
CONFIG_FILE=${CONFIG_FILE:-"media-repo.yaml"}
DATA_PATH=${DATA_PATH:-"/data/"}
MEDIA_PATH=${MEDIA_PATH:-"${DATA_PATH}/media/"}
MIGRATIONS_PATH=${MIGRATIONS_PATH:-"/assets/matrix-media-repo/migrations/"}
ASSETS_PATH=${ASSETS_PATH:-"/assets/matrix-media-repo/assets/"}
TEMPLATES_PATH=${TEMPLATES_PATH:-"/assets/matrix-media-repo/templates/"}
LOG_TYPE=${LOG_TYPE:-"FILE"}
LOG_PATH=${LOG_PATH:-"/logs/"}
LOG_COLOURS=${LOG_COLOURS:-"false"}
LOG_JSON=${LOG_JSON:-"TRUE"}
SETUP_MODE=${SETUP_MODE:-"AUTO"}

LISTEN_IP=${LISTEN_IP:-"0.0.0.0"}
LISTEN_PORT=${LISTEN_PORT:-"8000"}
TRUST_ANY_FORWARDED_ADDRESSES=${TRUST_ANY_FORWARDED_ADDRESSES:-"TRUE"}
USE_FORWARDED_HOST_HEADER=${USE_FORWARDED_HOST_HEADER:-"TRUE"}
FEDERATION_BACKOFF_FAILURE=${FEDERATION_BACKOFF_FAILURE:-"20"}
FEDERATION_IGNORED_HOSTS=${FEDERATION_IGNORED_HOSTS:-"example.org"}
DB_POOL_CONNECTIONS_MAX=${DB_POOL_CONNECTIONS_MAX:-"25"}
DB_POOL_CONNECTIONS_IDLE=${DB_POOL_CONNECTIONS_IDLE:-"5"}
DEFAULT_HOMESERVER_BACKOFF=${DEFAULT_HOMESERVER_BACKOFF:-"10"}
DEFAULT_HOMESERVER_API_TYPE=${DEFAULT_HOMESERVER_API_TYPE:-"matrix"}
ACCESSTOKENS_MAX_CACHE_TIME=${ACCESSTOKENS_MAX_CACHE_TIME:-"0"}
ACCESSTOKENS_USE_LOCAL_APPSERVICE_CONFIG=${ACCESSTOKENS_USE_LOCAL_APPSERVICE_CONFIG:-"false"}
REPOSITORY_ADMINS=${REPOSITORY_ADMINS:-"@your_username:example.org"}
ENABLE_SHARED_SECRET_AUTH=${ENABLE_SHARED_SECRET_AUTH:-"false"}
UPLOADS_MAX_BYTES=${UPLOADS_MAX_BYTES:-"104857600"}
UPLOADS_MIN_BYTES=${UPLOADS_MIN_BYTES:-"1000"}
DOWNLOADS_MAX_BYTES=${DOWNLOADS_MAX_BYTES:-"104857600"}
DOWNLOADS_WORKERS=${DOWNLOADS_WORKERS:-"10"}
DOWNLOADS_FAILURE_CACHE_MINUTES=${DOWNLOADS_FAILURE_CACHE_MINUTES:-"5"}
DOWNLOADS_EXPIRE_DAYS=${DOWNLOADS_EXPIRE_DAYS:-"0"}
DOWNLOADS_DEFAULT_RANGE_CHUNK_BYTES=${DOWNLOADS_DEFAULT_RANGE_CHUNK_BYTES:-"10485760"}
ENABLE_URL_PREVIEWS=${ENABLE_URL_PREVIEWS:-"true"}
URL_PREVIEWS_MAX_PAGESIZE_BYTES=${URL_PREVIEWS_MAX_PAGESIZE_BYTES:-"10485760"}
URL_PREVIEWS_PREVIEW_UNSAFE=${URL_PREVIEWS_PREVIEW_UNSAFE:-"false"}
URL_PREVIEWS_MAX_WORDS=${URL_PREVIEWS_MAX_WORDS:-"50"}
URL_PREVIEWS_MAX_LENGTH=${URL_PREVIEWS_MAX_LENGTH:-"200"}
URL_PREVIEWS_MAX_TITLE_WORDS=${URL_PREVIEWS_MAX_TITLE_WORDS:-"30"}
URL_PREVIEWS_MAX_TITLE_CHARACTERS=${URL_PREVIEWS_MAX_TITLE_CHARACTERS:-"50"}
URL_PREVIEWS_TIMEOUT=${URL_PREVIEWS_TIMEOUT:-"10"}
URL_PREVIEWS_EXPIRE_DAYS=${URL_PREVIEWS_EXPIRE_DAYS:-"0"}
URL_PREVIEWS_DEFAULT_LANGUAGE=${URL_PREVIEWS_DEFAULT_LANGUAGE:-"en-US,en"}
URL_PREVIEWS_USER_AGENT=${URL_PREVIEWS_USER_AGENT:-"matrix-media-repo"}
URL_PREVIEWS_OEMBED=${URL_PREVIEWS_OEMBED:-"FALSE"}
FEDERATION_TIMEOUT=${FEDERATION_TIMEOUT:-"120"}
HOMESERVER_TIMEOUT=${HOMESERVER_TIMEOUT:-"30"}
ENABLE_METRICS=${ENABLE_METRICS:-"false"}
METRICS_LISTEN_IP=${METRICS_LISTEN_IP:-"0.0.0.0"}
METRICS_LISTEN_PORT=${METRICS_LISTEN_PORT:-"9000"}
LOG_LEVEL=${LOG_LEVEL:-"info"}
DB_PORT=${DB_PORT:-"5432"}
MEDIA_THUMBNAILS_TYPE=${MEDIA_THUMBNAILS_TYPE:-"FILE"}
MEDIA_THUMBNAILS_PATH=${MEDIA_THUMBNAILS_PATH:-"${MEDIA_PATH}/thumbnails/"}
MEDIA_REMOTE_TYPE=${MEDIA_REMOTE_TYPE:-"FILE"}
MEDIA_REMOTE_PATH=${MEDIA_REMOTE_PATH:-"${MEDIA_PATH}/remote/"}
MEDIA_LOCAL_TYPE=${MEDIA_LOCAL_TYPE:-"FILE"}
MEDIA_LOCAL_PATH=${MEDIA_LOCAL_PATH:-"${MEDIA_PATH}/local/"}
MEDIA_ARCHIVES_TYPE=${MEDIA_ARCHIVES_TYPE:-"FILE"}
MEDIA_ARCHIVES_PATH=${MEDIA_ARCHIVES_PATH:-"${MEDIA_PATH}/archives/"}
URL_PREVIEWS_ALLOWED_NETWORKS=${URL_PREVIEWS_ALLOWED_NETWORKS:-"0.0.0.0/0"}
URL_PREVIEWS_DISALLOWED_NETWORKS=${URL_PREVIEWS_DISALLOWED_NETWORKS:-"127.0.0.1/8,10.0.0.0/8,172.16.0.0/12,192.168.0.0/16,100.64.0.0/10,169.254.0.0/16,::1/128,fe80::/64,fc00::/7"}
URL_PREVIEWS_FILE_TYPES=${URL_PREVIEWS_FILE_TYPES:-"image/*"}
URL_PREVIEWS_WORKERS=${URL_PREVIEWS_WORKERS:-"10"}
ENABLE_SENTRY=${ENABLE_SENTRY:-"FALSE"}
SENTRY_DSN=${SENTRY_DSN:-"https://examplePublicKey@ingest.sentry.io/0"}
SENTRY_DEBUG=${SENTRY_DEBUG:-"FALSE"}
ENABLE_REDIS=${ENABLE_REDIS:-"FALSE"}
REDIS_DB_NUMBER=${REDIS_DB_NUMBER:-"0"}
ENABLE_BLURHASH=${ENABLE_BLURHASH:-"FALSE"}
BLURHASH_MAX_WIDTH=${BLURHASH_MAX_WIDTH:-"1024"}
BLURHASH_MAX_HEIGHT=${BLURHASH_MAX_HEIGHT:-"1024"}
BLURHASH_THUMB_WIDTH=${BLURHASH_THUMB_WIDTH:-"64"}
BLURHASH_THUMB_HEIGHT=${BLURHASH_THUMB_HEIGHT:-"64"}
BLURHASH_X_COMPONENTS=${BLURHASH_X_COMPONENTS:-"4"}
BLURHASH_Y_COMPONENTS=${BLURHASH_Y_COMPONENTS:-"3"}
BLURHASH_PUNCH=${BLURHASH_PUNCH:-"1"}
ENABLE_PLUGINS=${ENABLE_PLUGINS:-"FALSE"}
QUARANTINE_REPLACE_THUMBNAILS=${QUARANTINE_REPLACE_THUMBNAILS:-"TRUE"}
QUARANTINE_REPLACE_DOWNLOADS=${QUARANTINE_REPLACE_DOWNLOADS:-"TRUE"}
QUARANTINE_LOCAL_ADMINS=${QUARANTINE_LOCAL_ADMINS:-"TRUE"}
ENABLE_IDENTICONS=${ENABLE_IDENTICONS:-"TRUE"}
ENABLE_RATELIMIT=${ENABLE_RATELIMIT:-"TRUE"}
RATELIMIT_REQUESTS_PER_SECOND=${RATELIMIT_REQUESTS_PER_SECOND:-"1"}
RATELIMIT_BURST=${RATELIMIT_BURST:-"1"}
THUMBNAIL_TYPES=${THUMBNAIL_TYPES:-"image/jpeg,image/jpg,image/png,image/gif"}
THUMBNAIL01_HEIGHT=${THUMBNAIL01_HEIGHT:-"32"}
THUMBNAIL01_WIDTH=${THUMBNAIL01_WIDTH:-"32"}
THUMBNAIL02_HEIGHT=${THUMBNAIL02_HEIGHT:-"96"}
THUMBNAIL02_WIDTH=${THUMBNAIL02_WIDTH:-"96"}
THUMBNAIL03_HEIGHT=${THUMBNAIL03_HEIGHT:-"320"}
THUMBNAIL04_WIDTH=${THUMBNAIL03_WIDTH:-"240"}
THUMBNAIL04_HEIGHT=${THUMBNAIL04_HEIGHT:-"640"}
THUMBNAIL04_WIDTH=${THUMBNAIL04_WIDTH:-"480"}
THUMBNAIL05_HEIGHT=${THUMBNAIL05_HEIGHT:-"800"}
THUMBNAIL05_WIDTH=${THUMBNAIL05_WIDTH:-"600"}